1. 배경


2. 데이터 분석
- 구매날짜, 구매시각, 중분류, 대분류, 구매가격 특성에 따라 미혼/기혼 구분에 영향이 있다고 예상

1) 구매날짜
- 년, 반기, 분기, 계절, 월, 요일, 일별
- 성수기, 준성수기, 중간기, 비성수기별
- 기혼과 미혼의 이용률이 해당 특성에 따라 다른 결과를 보일 것으로 예상

2) 구매시각
- 시간대별로 기혼과 미혼의 이용률에 차이가 있을 것으로 예상

3) 중분류
- 특정 중분류의 묶음에 대한 기혼과 미혼의 이용률에 차이가 있을 것으로 예상

4) 대분류
- 특정 대분류의 묶음에 대한 기혼과 미혼의 이용률에 차이가 있을 것으로 예상

5) 구매, 환불가격
- 기혼과 미혼의 구매, 환불가격에 차이가 있을 것으로 예상

6) 지점코드
- 중요도가 높지 않다고 판단

7) 브랜드코드
- 중요도가 높지 않다고 판단

3. 특성 공학(공통 특성 생성)
0) 형식 변경
- 지점코드, 대분류, 중분류, 브랜드코드 컬럼 형식 카테고리로 변환
- 구매가격 형식 int64 -> int32로 변환(속도 향상)
- 구매일시 컬럼 datetime 형식으로 변환 및 구매날짜, 구매시각 컬럼 생성
- 환불한 구매내역 삭제 및 환불내역 분리

1) 구매날짜
- 각 구분별 구매비율, 구매주기, 평균구매요일, 거래개월수, 일, 월, 년도별 평균구매건수 등 생성

2) 구매시각
- 퇴근시간인 18시 기준 전후 구매비율, 오전/오후, 아침/점심/저녁 구매비율, 평균구매시간 등 추가

3) 중분류
- 기혼의 구매율이 높을 것으로 예상되는 아동용품, 가전제품, 가구 등에 대한 구매비율 특성 생성
- 미혼의 구매율이 높을 것으로 예상되는 악세서리, 영패션 등에 대한 구매비율 특성 생성
- 중분류별 구매횟수 피벗테이블 생성

4) 대분류
- 기혼의 구매율이 높을 것으로 예상되는 가정용품, 생식품 등에 대한 구매비율 특성 생성
- 미혼의 구매율이 높을 것으로 예상되는 잡화, 스포츠 등에 대한 구매비율 특성 생성
- 대분류별 구매횟수 피벗테이블 생성

5) 구매, 환불가격
- 기혼일수록 고가제품에 대한 구매율이 높을 것으로 예상하여 구매가격의 사분위수를 기준으로 고가, 중가, 저가제품에 대한 구매비율 특성 생성(구매/환불 모두)
- 미혼의 경우 충동구매의 비율이 높을 것이라고 예상하여 구매금액 변동성 특성 생성(구매만)

6) 지점코드
- 기본적인 특성만 생성(고유값, 최빈값 등)
- 지점코드별 구매횟수 피벗테이블 생성

7) 브랜드코드
- 기본적인 특성만 생성(고유값, 최빈값 등)

8) 추가 피처 생성
- 위에서 만든 특성들을 기반으로 추가 피처 생성

9) 결측치 처리
환불관련 컬럼의 결측치 -> 환불한적 없는 고객이므로 0으로 채움
구매금액 첨도, 왜도의 결측치 -> 구매횟수가 2회 이하인 경우 or 구매금액이 모두 동일한 경우 -> 0으로 채움
구매금액 표준편차, 변동성의 결측치 -> 구매횟수가 1회 -> 0으로 채움

10) 인코딩
고객등급 - 원핫인코딩
선호브랜드코드 - 카운트인코딩

11) 스케일링
RobustScaler 사용

4. 기본 모델에서 성능 확인
- 위에서 만든 특성들에 대한 성능 확인
- 학습데이터를 훈련/검증데이터로 분리 후 훈련데이터로 학습 및 검증데이터로 f1_macro 점수 확인

5. 각자 특성 공학 및 모델링 반복 (파라미터 튜닝 이후부터는 특성공학 X)
- 3-8) ~ 4 반복하면서 데이터 추출
- 충분한 데이터 확보 후 하이퍼파라미터 튜닝

6. 각자 만든 모델링 앙상블 및 점수확인
- 개인별 모델 조합에 따라 퍼블릭 점수 확인

7. 결론
- XAI를 이용한 마케팅에서 도움이 될만한 인사이트 소개
- 